<script lang="ts">
	type Props = {
		playerNumber: number;
		data: App.GameState['playerData'][number];
	};

	let { playerNumber, data }: Props = $props();
	$effect.pre(() => {
		if (!data.name) {
			data.name = `ç©å®¶${playerNumber}`;
		}
	});
</script>

<div
	class="flex flex-col items-center rounded-lg border-2 border-black p-5 {data.dead
		? 'bg-black text-white'
		: ''}"
>
	<div>
		<span>#{playerNumber}</span>
	</div>
	<div>
		<input
			type="text"
			value={data.name}
			onchange={(e) => (data.name = e.currentTarget.value)}
			class="w-full text-center"
		/>
	</div>
	<div>
		<select bind:value={data.role} class="bg-transparent">
			<option value="king">ç‹¼ç‹</option>
			<option value="werewolf">ç‹¼äºº</option>
			<option value="seer">é è¨€å®¶</option>
			<option value="witch">å¥³å·«</option>
			<option value="hunter">çµäºº</option>
			<option value="knight">é¨å£«</option>
			<option value="villager">æ‘æ°‘</option>
		</select>
	</div>
	<div>
		<button onclick={() => (data.dead = !data.dead)}>{data.dead ? 'â˜ ï¸' : 'ğŸ˜€'}</button>
		<button onclick={() => (data.isSheriff = !data.isSheriff)}
			>{data.isSheriff ? 'ğŸ‘®' : 'ğŸ©'}</button
		>
	</div>
</div>
